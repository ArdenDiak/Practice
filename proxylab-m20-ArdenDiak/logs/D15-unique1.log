>proxy proxy
Proxy set up at ece011.ece.local.cmu.edu:11719
>source '/afs/andrew.cmu.edu/usr11/aqd/private/18213/review/HTTPS_Web_Proxy/proxylab-m20-ArdenDiak/tests/D15-unique1.cmd'
># Make sure cache holds at most one copy of a file
>serve s1
Server s1 running at ece011.ece.local.cmu.edu:11427
>generate random-text00.txt 100K
>generate random-text01.txt 100K
>generate random-text02.txt 100K
>generate random-text03.txt 100K
># Use 300K of cache
>fetch f00 random-text00.txt s1
Client: Fetching '/random-text00.txt' from ece011.ece.local.cmu.edu:11427
>fetch f01 random-text01.txt s1
Client: Fetching '/random-text01.txt' from ece011.ece.local.cmu.edu:11427
>fetch f02 random-text02.txt s1
Client: Fetching '/random-text02.txt' from ece011.ece.local.cmu.edu:11427
>wait *
>check f00
Request f00 yielded expected status 'ok'
>check f01
Request f01 yielded expected status 'ok'
>check f02
Request f02 yielded expected status 'ok'
># Make 10 requests of same file
># If each copy gets cached, that would fill up cache
># and cause older files to be evicted
>request r03a random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
>request r03b random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
>request r03c random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
>request r03d random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
>request r03e random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
>request r03f random-text03.txt s1
Proxy stdout: cli ---> pxy      srv:
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
Proxy stdout: Request-ID: f00
Proxy stdout: Response: Immediate
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text00.txt over 0 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: f01
Proxy stdout: Response: Immediate
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text01.txt over 0 blocks
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text00.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
>request r03g random-text03.txt s1
Proxy stdout: Request-ID: f00
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
Proxy stdout: Response: Immediate
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
>request r03h random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
Proxy stdout: GET /random-text01.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
>request r03i random-text03.txt s1
Proxy stdout: Request-ID: f01
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
Proxy stdout: Response: Immediate
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: f02
Proxy stdout: Response: Immediate
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text02.txt over 0 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text02.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
>request r03j random-text03.txt s1
Client: Requesting '/random-text03.txt' from ece011.ece.local.cmu.edu:11427
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: f02
Proxy stdout: Response: Immediate
Proxy stdout: 
>wait *
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text00.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text02.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text01.txt
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03a
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03a
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03b
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
># These responses are all of the same file.  Only one should be cached
># Out of order response will cause sequential proxy to fail
>respond r03f r03g r03h r03i r03j
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Server responded to request r03f with status ok
Server responded to request r03g with status ok
Server responded to request r03h with status ok
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Server responded to request r03i with status ok
Proxy stdout: Connection: close
Server responded to request r03j with status ok
>respond r03a r03b r03c r03d r03e
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03b
Server responded to request r03a with status ok
Proxy stdout: Response: Deferred
Server responded to request r03b with status ok
Proxy stdout: 
Server responded to request r03c with status ok
Proxy stdout: 
Proxy stdout: =====================
Server responded to request r03d with status ok
Proxy stdout: cli ---> pxy      srv:
Server responded to request r03e with status ok
>wait *
Proxy stdout: Request-ID: r03c
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03c
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03d
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03d
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03e
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03e
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03f
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03f
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03g
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03g
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03h
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03h
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03i
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03i
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: cli ---> pxy      srv:
Proxy stdout: Request-ID: r03j
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: ======================
Proxy stdout: Lookup for http://ece011.ece.local.cmu.edu:11427/random-text03.txt over 3 blocks
Proxy stdout: cli      pxy <--> srv @ ece011.ece.local.cmu.edu:11427
Proxy stdout: =======================
Proxy stdout: cli      pxy ---> srv:
Proxy stdout: GET /random-text03.txt HTTP/1.0
Proxy stdout: Host: ece011.ece.local.cmu.edu:11427
Proxy stdout: User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:3.10.0) Gecko/20191101 Firefox/63.0.1
Proxy stdout: Connection: close
Proxy stdout: Proxy-Connection: close
Proxy stdout: Request-ID: r03j
Proxy stdout: Response: Deferred
Proxy stdout: 
Proxy stdout: 
Proxy stdout: =====================
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: cache has 10 blocks
Proxy stdout: >> max_time_since_accessed: 0, lru_block's URI: http://ece011.ece.local.cmu.edu:11427/random-text00.txt
Proxy stdout: freeeing victim http://ece011.ece.local.cmu.edu:11427/random-text00.txt
Proxy stdout: Caching data for URI: http://ece011.ece.local.cmu.edu:11427/random-text03.txt
Proxy stdout: cache has 10 blocks
Proxy stdout: >> max_time_since_accessed: 0, lru_block's URI: http://ece011.ece.local.cmu.edu:11427/random-text02.txt
>check r03a
Request r03a yielded expected status 'ok'
>check r03b
Request r03b yielded expected status 'ok'
>check r03c
Request r03c yielded expected status 'ok'
>check r03d
Request r03d yielded expected status 'ok'
>check r03e
Request r03e yielded expected status 'ok'
>check r03f
Request r03f yielded expected status 'ok'
>check r03g
Request r03g yielded expected status 'ok'
>check r03h
Request r03h yielded expected status 'ok'
>check r03i
Request r03i yielded expected status 'ok'
>check r03j
Request r03j yielded expected status 'ok'
># These should still be in the cache
>request r00a random-text00.txt s1
Client: Requesting '/random-text00.txt' from ece011.ece.local.cmu.edu:11427
>request r01a random-text01.txt s1
Client: Requesting '/random-text01.txt' from ece011.ece.local.cmu.edu:11427
>request r02a random-text02.txt s1
Client: Requesting '/random-text02.txt' from ece011.ece.local.cmu.edu:11427
>wait *
>check r00a
ERROR: Request r00a generated status 'requesting'.  Expecting 'ok'
>check r01a
ERROR: Request r01a generated status 'requesting'.  Expecting 'ok'
>check r02a
ERROR: Request r02a generated status 'requesting'.  Expecting 'ok'
>delete random-text00.txt
>delete random-text01.txt
>delete random-text02.txt
>delete random-text03.txt
>quit
Proxy stdout: freeeing victim http
Testing done.  Elapsed time = 1.40 seconds
ERROR COUNT = 3
